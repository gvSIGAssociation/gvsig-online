{% extends "base_services.html" %}
{% load staticfiles %}
{% load i18n %}

{% block content %}
<div class="dash-content">		
	<div class="row">
		<div class="col s12 m12">
			<form role="form" class="col s12" method="get" action="/gvsigonline/layer_create/">
				<div class="row">
					<button class="btn waves-effect waves-light blue init-session-button right" style="margin-top: 20px; margin-right: 10px;" type="submit">{% trans "Next" %}</button>
				</div>
				{% if form.errors %}
				<div id="form-error" class="red-text" style="color:#ff0000;">
					<ul>
					{% for field in form %}
						{% if field.errors %}
							<li>{{field.label}}. {{ field.errors|striptags }}</li>
						{% endif %}	
					{% endfor %}
					{% for field, msg in form.errors.iteritems %}
						<li>{{ msg|striptags }}</li>
					{% endfor %}
					</ul>
				</div>
				{% endif %}{% if message %}
				<div id="form-error" class="red-text" style="color:#ff0000;">
					<p>* {{ message }}</p>
				</div>
				{% endif %}
				<div class="col s12 m12">
					<select id="id_layer_type" name="id_layer_type">
						{% for type_code, type_name in types %}
						<option value="{{type_code}}">{{type_name}}</option>
						{% endfor %}
				    </select>
				    <label for="id_layer_type">{% trans "Layer type" %}</label>
				</div>
			</form>		
		</div>
	</div>
</div>
{% endblock %}

{% block extra-scripts %}
<script type="text/javascript">
	$(document).ready(function() {
		
		$('#select-style option[value="{{layer.style}}"]').attr('selected','selected');
		$('#select-style').material_select();
		
		// translate default layer group
		var lgs = $("#id_layer_group");
		var lg_options = $("#id_layer_group option");
		lgs.material_select('destroy');
		for (var i=0; i<lg_options.length; i++) {
			text = $(lg_options[i]).text();
			if (text=="__default__") {
				$(lg_options[i]).html('{% trans "Default" %}');
			}
			lgs.parent().find('.caret').remove(); // not needed with version >= 0.97.1
			lgs.material_select();
		}
	});
</script>
{% endblock %}